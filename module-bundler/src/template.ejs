<%#
    The object that will be provided in compilation time:
    {
        randomHash: string; // a random hash
        modules: Module[]; // an object representation of module
        mainModule: number; // index of entry point module
    }

    interface Module {
        hash: string; // a hash of absolute module
        content: string; // already transformed content of module file,
        requireFunction: string // a name of require function to use
        moduleName: string // a name of module object
        exportsName: string // a name of exports object
    }
%>

(() => {
    const moduleBundler_<%= randomHash %> = {};
    __bundler$<%= randomHash %>.modules = {
        <% modules.forEach(module => { %>
            "<%= module.hash %>": function(<% module.requireFunction %>, <% module.exportsName%>) {
                <% module.content%>
            },
        <% }) %>
    }
})();
